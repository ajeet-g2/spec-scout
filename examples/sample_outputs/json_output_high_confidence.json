{
  "spec_location": "spec/models/user_spec.rb:42",
  "action": "replace_factory_strategy",
  "from_value": "create(:user)",
  "to_value": "build_stubbed(:user)",
  "confidence": "high",
  "explanation": [
    "No database persistence required for this test",
    "Factory creates unnecessary database records",
    "Test exhibits unit test behavior patterns",
    "No risk factors detected (no after_commit callbacks)",
    "Potential performance improvement: ~60% faster execution"
  ],
  "agent_results": [
    {
      "agent_name": "database",
      "verdict": "db_unnecessary",
      "confidence": "high",
      "reasoning": "No database writes or reloads detected in test execution",
      "metadata": {
        "insert_count": 3,
        "select_count": 8,
        "reload_detected": false,
        "transaction_usage": false
      }
    },
    {
      "agent_name": "factory",
      "verdict": "prefer_build_stubbed",
      "confidence": "medium",
      "reasoning": "Factory usage pattern suggests build_stubbed would be sufficient",
      "metadata": {
        "factory_strategies": {
          "user": "create",
          "post": "create"
        },
        "association_access": false,
        "persistence_required": false
      }
    },
    {
      "agent_name": "intent",
      "verdict": "unit_test_behavior",
      "confidence": "high",
      "reasoning": "Test exhibits unit test patterns with isolated model testing",
      "metadata": {
        "spec_type": "model",
        "file_location": "spec/models/",
        "integration_boundaries": false,
        "external_dependencies": false
      }
    },
    {
      "agent_name": "risk",
      "verdict": "safe_to_optimize",
      "confidence": "high",
      "reasoning": "No risk factors detected - safe to apply optimization",
      "metadata": {
        "after_commit_callbacks": false,
        "complex_callbacks": false,
        "side_effects": false,
        "external_integrations": false
      }
    }
  ],
  "profile_data": {
    "example_location": "spec/models/user_spec.rb:42",
    "spec_type": "model",
    "runtime_ms": 245,
    "factories": {
      "user": {
        "strategy": "create",
        "count": 3
      },
      "post": {
        "strategy": "create",
        "count": 2
      }
    },
    "db": {
      "total_queries": 13,
      "inserts": 5,
      "selects": 8,
      "updates": 0,
      "deletes": 0
    },
    "events": {
      "sql.active_record": {
        "count": 13,
        "time": 0.15
      },
      "factory_bot.run_factory": {
        "count": 5,
        "time": 0.08
      }
    },
    "metadata": {
      "testprof_version": "1.3.0",
      "rails_version": "7.0.4"
    }
  },
  "metadata": {
    "timestamp": "2024-01-15T10:30:00Z",
    "spec_scout_version": "1.0.0",
    "analysis_duration_ms": 12,
    "agents_executed": ["database", "factory", "intent", "risk"]
  }
}